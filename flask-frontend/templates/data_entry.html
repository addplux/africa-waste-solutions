{% extends "base.html" %}

{% block title %}Data Entry - Africa Waste Solutions{% endblock %}

{% block content %}
<div class="flex h-screen bg-gray-100">
    <!-- Sidebar -->
    {% include 'components/sidebar.html' %}

    <!-- Main Content -->
    <div class="flex-1 overflow-auto">
        <!-- Header -->
        <header class="bg-white shadow-sm border-b border-gray-200 px-8 py-6">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900">Waste Data Entry</h1>
                    <p class="text-gray-600 mt-1">Record waste collection and disposal data</p>
                </div>
                <div class="flex items-center gap-4">
                    <button onclick="showBulkEntry()"
                        class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-semibold">
                        <i class="fas fa-list mr-2"></i>
                        Bulk Entry
                    </button>
                    <button onclick="showHistory()"
                        class="px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors font-semibold">
                        <i class="fas fa-history mr-2"></i>
                        Entry History
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="p-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Data Entry Form -->
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-xl shadow-md p-8">
                        <h2 class="text-xl font-bold text-gray-900 mb-6">New Waste Entry</h2>

                        <form method="POST" action="{{ url_for('data_entry') }}" enctype="multipart/form-data"
                            id="wasteEntryForm">
                            <!-- Account Selection -->
                            <div class="mb-6">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    Account / Customer <span class="text-red-500">*</span>
                                </label>
                                <div class="relative">
                                    <select name="account_id" required
                                        class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all text-gray-900 appearance-none">
                                        <option value="">Select an account...</option>
                                        <option value="1">John Doe - Plot 123, Kabulonga (Consumer)</option>
                                        <option value="2">ABC Manufacturing Ltd - Plot 456, Industrial Area (Business)
                                        </option>
                                        <option value="3">Jane Smith - Plot 789, Roma (Consumer)</option>
                                        <option value="4">Green Grocers - Plot 321, Woodlands (Business)</option>
                                    </select>
                                    <i
                                        class="fas fa-chevron-down absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                                </div>
                            </div>

                            <!-- Collection Date & Time -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">
                                        Collection Date <span class="text-red-500">*</span>
                                    </label>
                                    <input type="date" name="collection_date" required
                                        class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all text-gray-900">
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">
                                        Collection Time <span class="text-red-500">*</span>
                                    </label>
                                    <input type="time" name="collection_time" required
                                        class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all text-gray-900">
                                </div>
                            </div>

                            <!-- Waste Type -->
                            <div class="mb-6">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    Waste Type <span class="text-red-500">*</span>
                                </label>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                    <label class="cursor-pointer">
                                        <input type="radio" name="waste_type" value="plastic" required
                                            class="peer hidden">
                                        <div
                                            class="p-4 border-2 border-gray-200 rounded-lg text-center peer-checked:border-blue-600 peer-checked:bg-blue-50 hover:border-blue-300 transition-all">
                                            <i class="fas fa-bottle-water text-2xl text-blue-600 mb-2"></i>
                                            <p class="font-semibold text-sm">Plastic</p>
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="waste_type" value="organic" class="peer hidden">
                                        <div
                                            class="p-4 border-2 border-gray-200 rounded-lg text-center peer-checked:border-green-600 peer-checked:bg-green-50 hover:border-green-300 transition-all">
                                            <i class="fas fa-leaf text-2xl text-green-600 mb-2"></i>
                                            <p class="font-semibold text-sm">Organic</p>
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="waste_type" value="metal" class="peer hidden">
                                        <div
                                            class="p-4 border-2 border-gray-200 rounded-lg text-center peer-checked:border-gray-600 peer-checked:bg-gray-50 hover:border-gray-300 transition-all">
                                            <i class="fas fa-recycle text-2xl text-gray-600 mb-2"></i>
                                            <p class="font-semibold text-sm">Metal</p>
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="waste_type" value="paper" class="peer hidden">
                                        <div
                                            class="p-4 border-2 border-gray-200 rounded-lg text-center peer-checked:border-yellow-600 peer-checked:bg-yellow-50 hover:border-yellow-300 transition-all">
                                            <i class="fas fa-newspaper text-2xl text-yellow-600 mb-2"></i>
                                            <p class="font-semibold text-sm">Paper</p>
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="waste_type" value="glass" class="peer hidden">
                                        <div
                                            class="p-4 border-2 border-gray-200 rounded-lg text-center peer-checked:border-teal-600 peer-checked:bg-teal-50 hover:border-teal-300 transition-all">
                                            <i class="fas fa-wine-bottle text-2xl text-teal-600 mb-2"></i>
                                            <p class="font-semibold text-sm">Glass</p>
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="waste_type" value="electronic" class="peer hidden">
                                        <div
                                            class="p-4 border-2 border-gray-200 rounded-lg text-center peer-checked:border-purple-600 peer-checked:bg-purple-50 hover:border-purple-300 transition-all">
                                            <i class="fas fa-laptop text-2xl text-purple-600 mb-2"></i>
                                            <p class="font-semibold text-sm">E-Waste</p>
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="waste_type" value="hazardous" class="peer hidden">
                                        <div
                                            class="p-4 border-2 border-gray-200 rounded-lg text-center peer-checked:border-red-600 peer-checked:bg-red-50 hover:border-red-300 transition-all">
                                            <i class="fas fa-radiation text-2xl text-red-600 mb-2"></i>
                                            <p class="font-semibold text-sm">Hazardous</p>
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="waste_type" value="mixed" class="peer hidden">
                                        <div
                                            class="p-4 border-2 border-gray-200 rounded-lg text-center peer-checked:border-orange-600 peer-checked:bg-orange-50 hover:border-orange-300 transition-all">
                                            <i class="fas fa-trash text-2xl text-orange-600 mb-2"></i>
                                            <p class="font-semibold text-sm">Mixed</p>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <!-- Weight/Volume -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">
                                        Weight (kg) <span class="text-red-500">*</span>
                                    </label>
                                    <input type="number" name="weight" step="0.01" min="0" required
                                        placeholder="e.g. 25.5"
                                        class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all text-gray-900">
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">
                                        Volume (m³) <span class="text-gray-400">(Optional)</span>
                                    </label>
                                    <input type="number" name="volume" step="0.01" min="0" placeholder="e.g. 1.5"
                                        class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all text-gray-900">
                                </div>
                            </div>

                            <!-- Location -->
                            <div class="mb-6">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    Collection Location
                                </label>
                                <input type="text" name="location" placeholder="e.g. Plot 123, Kabulonga, Lusaka"
                                    class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all text-gray-900">
                            </div>

                            <!-- Photo Upload -->
                            <div class="mb-6">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    Photo Evidence <span class="text-gray-400">(Optional)</span>
                                </label>
                                <div
                                    class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors">
                                    <i class="fas fa-camera text-gray-400 text-4xl mb-3"></i>
                                    <p class="text-sm text-gray-600 mb-3">Upload photo of waste collection</p>
                                    <input type="file" name="photo" accept="image/*"
                                        class="text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700 file:cursor-pointer file:transition-colors">
                                </div>
                            </div>

                            <!-- Notes -->
                            <div class="mb-6">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    Additional Notes
                                </label>
                                <textarea name="notes" rows="3"
                                    placeholder="Any additional information about this collection..."
                                    class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all text-gray-900 resize-none"></textarea>
                            </div>

                            <!-- Submit Buttons -->
                            <div class="flex gap-4">
                                <button type="submit"
                                    class="flex-1 bg-blue-700 hover:bg-blue-800 text-white font-bold py-4 rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5">
                                    <i class="fas fa-save mr-2"></i>
                                    Save Entry
                                </button>
                                <button type="button" onclick="resetForm()"
                                    class="px-8 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-4 rounded-lg transition-all">
                                    <i class="fas fa-redo mr-2"></i>
                                    Reset
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Quick Stats & Recent Entries -->
                <div class="space-y-6">
                    <!-- Today's Stats -->
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">Today's Summary</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                                <div class="flex items-center gap-3">
                                    <div class="bg-blue-600 rounded-full p-2">
                                        <i class="fas fa-clipboard-list text-white"></i>
                                    </div>
                                    <span class="font-semibold text-gray-700">Total Entries</span>
                                </div>
                                <span class="text-2xl font-bold text-blue-600">12</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                                <div class="flex items-center gap-3">
                                    <div class="bg-green-600 rounded-full p-2">
                                        <i class="fas fa-weight text-white"></i>
                                    </div>
                                    <span class="font-semibold text-gray-700">Total Weight</span>
                                </div>
                                <span class="text-2xl font-bold text-green-600">342 kg</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-purple-50 rounded-lg">
                                <div class="flex items-center gap-3">
                                    <div class="bg-purple-600 rounded-full p-2">
                                        <i class="fas fa-users text-white"></i>
                                    </div>
                                    <span class="font-semibold text-gray-700">Accounts Served</span>
                                </div>
                                <span class="text-2xl font-bold text-purple-600">8</span>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Entries -->
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">Recent Entries</h3>
                        <div class="space-y-3">
                            <div class="p-3 bg-gray-50 rounded-lg border-l-4 border-blue-600">
                                <div class="flex justify-between items-start mb-1">
                                    <span class="font-semibold text-sm text-gray-900">John Doe</span>
                                    <span class="text-xs text-gray-500">10:30 AM</span>
                                </div>
                                <p class="text-xs text-gray-600">Plastic - 15.5 kg</p>
                            </div>
                            <div class="p-3 bg-gray-50 rounded-lg border-l-4 border-green-600">
                                <div class="flex justify-between items-start mb-1">
                                    <span class="font-semibold text-sm text-gray-900">ABC Manufacturing</span>
                                    <span class="text-xs text-gray-500">9:45 AM</span>
                                </div>
                                <p class="text-xs text-gray-600">Organic - 45.0 kg</p>
                            </div>
                            <div class="p-3 bg-gray-50 rounded-lg border-l-4 border-yellow-600">
                                <div class="flex justify-between items-start mb-1">
                                    <span class="font-semibold text-sm text-gray-900">Jane Smith</span>
                                    <span class="text-xs text-gray-500">9:15 AM</span>
                                </div>
                                <p class="text-xs text-gray-600">Paper - 8.2 kg</p>
                            </div>
                        </div>
                        <button onclick="showHistory()"
                            class="w-full mt-4 text-blue-700 hover:text-blue-800 font-semibold text-sm transition-colors">
                            View All Entries →
                        </button>
                    </div>

                    <!-- Quick Actions -->
                    <div class="bg-gradient-to-br from-blue-600 to-blue-800 rounded-xl shadow-md p-6 text-white">
                        <h3 class="text-lg font-bold mb-3">Quick Actions</h3>
                        <div class="space-y-2">
                            <button onclick="scanBarcode()"
                                class="w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm py-3 rounded-lg font-semibold transition-all">
                                <i class="fas fa-qrcode mr-2"></i>
                                Scan QR/Barcode
                            </button>
                            <button onclick="showBulkEntry()"
                                class="w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm py-3 rounded-lg font-semibold transition-all">
                                <i class="fas fa-list mr-2"></i>
                                Bulk Entry
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<script>
    function resetForm() {
        document.getElementById('wasteEntryForm').reset();
    }

    function showHistory() {
        alert('Entry History feature coming soon!');
    }

    function showBulkEntry() {
        alert('Bulk Entry feature coming soon!');
    }

    function scanBarcode() {
        alert('QR/Barcode Scanner feature coming soon!');
    }

    // Auto-set today's date
    document.addEventListener('DOMContentLoaded', function () {
        const dateInput = document.querySelector('input[name="collection_date"]');
        const timeInput = document.querySelector('input[name="collection_time"]');

        if (dateInput && !dateInput.value) {
            const today = new Date().toISOString().split('T')[0];
            dateInput.value = today;
        }

        if (timeInput && !timeInput.value) {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            timeInput.value = `${hours}:${minutes}`;
        }
    });
</script>
{% endblock %}